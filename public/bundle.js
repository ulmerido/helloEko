!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/public",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a={apiKey:"AIzaSyBeVoVIvz18UDl4KCrkKTAXt859MNAydQ8",authDomain:"eko-ido.firebaseapp.com",databaseURL:"https://eko-ido.firebaseio.com",projectId:"eko-ido",storageBucket:"eko-ido.appspot.com",messagingSenderId:"694785424350",appId:"1:694785424350:web:84943eea2472b4194f7b4f"},s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),firebase.initializeApp(a),this.getInstance=this.getInstance.bind(this),this.getDatabase=this.getDatabase.bind(this),this.incrementValue=this.incrementValue.bind(this)}return n(e,[{key:"getInstance",value:function(){return firebase}},{key:"getDatabase",value:function(){return firebase.database()}},{key:"incrementValue",value:async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=firebase.database().ref(e),n=i.transaction((function(e){return e+t}));return await n}},{key:"pathExists",value:async function(e){var t=firebase.database().ref(e);return(await t.once("value")).exists()}},{key:"get",value:async function(e){return firebase.database().ref(e).once("value").then((function(e){return e}))}},{key:"addListener",value:async function(e,t){var i=firebase.database().ref(e);return await i.on("value",t)}},{key:"setValue",value:async function(e,t){var i=firebase.database().ref(e);return await i.set(t)}}]),e}());t.default=s},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=(s(i(4)),s(i(2)));function s(e){return e&&e.__esModule?e:{default:e}}s(i(0)).default.getInstance();(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoComponent={video:document.getElementById("video1"),btn_PlayPause:document.getElementById("play-pause"),btn_Like:document.getElementById("like"),btn_Dislike:document.getElementById("dislike"),div_Juice:document.querySelector(".progress-juice"),div_Bar:document.getElementById("bar"),label_VideoTime:document.getElementById("video-time"),label_Likes:document.getElementById("label-likes"),label_Dislikes:document.getElementById("label-dislikes"),label_views:document.getElementById("label-views")}}return n(e,[{key:"run",value:function(){var e=new a.default(this.videoComponent);e.ID="video3",e.Init()}}]),e}())).run()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=r(i(0)),s=r(i(3));function r(e){return e&&e.__esModule?e:{default:e}}a.default.getInstance();var l="#aaa",u="#0084ff",o="#ff2b1c",c=1,d=0,f=-1,h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=t.video,this.btn_PlayPause=t.btn_PlayPause,this.btn_Like=t.btn_Like,this.btn_Dislike=t.btn_Dislike,this.label_vidTime=t.label_VideoTime,this.label_Likes=t.label_Likes,this.label_Dislikes=t.label_Dislikes,this.label_views=t.label_views,this.progressBar=t.div_Bar,this.progressJuice=t.div_Juice,this.didView=!1,this.ID="default",this.Init=this.Init.bind(this),this.OnClick_ButtonPlayPause=this.OnClick_ButtonPlayPause.bind(this),this.OnTimeUpdate_VideoPlayer=this.OnTimeUpdate_VideoPlayer.bind(this),this.OnClick_ProgressBar=this.OnClick_ProgressBar.bind(this),this.OnClick_ButtonLike=this.OnClick_ButtonLike.bind(this),this.OnClick_ButtonDislike=this.OnClick_ButtonDislike.bind(this),this._updateLikeButtonsColor=this._updateLikeButtonsColor.bind(this),this._handelIncrementVideoTotalViews=this._handelIncrementVideoTotalViews.bind(this),this.video.pause()}return n(e,[{key:"Init",value:function(){var e=this;this.video.onloadedmetadata=this.OnTimeUpdate_VideoPlayer,this.btn_PlayPause.onclick=this.OnClick_ButtonPlayPause,this.video.ontimeupdate=this.OnTimeUpdate_VideoPlayer,this.video.onclick=this.OnClick_ButtonPlayPause,this.progressBar.onclick=this.OnClick_ProgressBar,this.btn_Like.onclick=this.OnClick_ButtonLike,this.btn_Dislike.onclick=this.OnClick_ButtonDislike,s.default.getUserID().then((function(t){var i="users/"+t+"/views/"+e.ID;a.default.addListener(i,(function(t){t.exists()&&e._updateLikeButtonsColor(t.val().like)}))})),a.default.addListener("Videos/"+this.ID+"/",(function(t){var i=t.val();e.label_Likes.innerHTML=""+i.likes,e.label_Dislikes.innerHTML=""+i.dislikes,e.label_views.innerHTML=""+i.views})),document.body.onkeyup=function(t){32==t.keyCode?e.OnClick_ButtonPlayPause():37==t.keyCode?e.video.currentTime=e.video.currentTime-1.5:39==t.keyCode&&(e.video.currentTime=e.video.currentTime+1.5)}}},{key:"_handelIncrementVideoTotalViews",value:function(){var e=this;s.default.getUserID().then((function(t){var i="users/"+t+"/views/"+e.ID;a.default.pathExists(i).then((function(t){if(!t){a.default.setValue(i,{like:0}),a.default.incrementValue("Videos/"+e.ID+"/views")}}))})),this.didView=!0}},{key:"_updateLikeButtonsColor",value:function(e){switch(e){case c:this.btn_Like.style.color=u,this.btn_Dislike.style.color=l;break;case d:this.btn_Like.style.color=l,this.btn_Dislike.style.color=l;break;case f:this.btn_Like.style.color=l,this.btn_Dislike.style.color=o}}},{key:"OnTimeUpdate_VideoPlayer",value:function(){var e=this._ssToHHMMSS(this.video.currentTime),t=this._ssToHHMMSS(this.video.duration);this.label_vidTime.innerHTML=" "+e+" / "+t+" ";var i=this.video.currentTime/this.video.duration;this.progressJuice.style.width=100*i+"%",this.video.ended&&(this.btn_PlayPause.className="play")}},{key:"OnClick_ButtonPlayPause",value:function(){this.video.paused?(this.video.play(),this.btn_PlayPause.className="pause",this.didView||this._handelIncrementVideoTotalViews()):(this.btn_PlayPause.className="play",this.video.pause())}},{key:"OnClick_ProgressBar",value:function(){var e=(event.offsetX-this.progressBar.offsetLeft)/this.progressBar.offsetWidth;this.video.currentTime=e*this.video.duration}},{key:"OnClick_ButtonLike",value:function(){var e=this;s.default.getUserID().then((async function(t){var i="users/"+t.split(".").join("")+"/views/"+e.ID,n="Videos/"+e.ID+"/likes",s="Videos/"+e.ID+"/dislikes",r=await a.default.get(i);if(r.exists())switch(r.val().like){case c:a.default.setValue(i,{like:0}),a.default.incrementValue(n,-1);break;case d:a.default.setValue(i,{like:1}),a.default.incrementValue(n);break;case f:a.default.setValue(i,{like:1}),a.default.incrementValue(n),a.default.incrementValue(s,-1)}else a.default.setValue(i,{like:1}),a.default.incrementValue(n)}))}},{key:"OnClick_ButtonDislike",value:function(){var e=this;s.default.getIP().then((function(t){var i="users/"+t.split(".").join("")+"/views/"+e.ID,n="Videos/"+e.ID+"/likes",s="Videos/"+e.ID+"/dislikes";a.default.get(i).then((function(e){if(e.exists())switch(e.val().like){case c:a.default.setValue(i,{like:-1}),a.default.incrementValue(n,-1),a.default.incrementValue(s);break;case d:a.default.setValue(i,{like:-1}),a.default.incrementValue(s);break;case f:a.default.setValue(i,{like:0}),a.default.incrementValue(s,-1)}else a.default.setValue(i,{like:-1}),a.default.incrementValue(s)}))}))}},{key:"_ssToHHMMSS",value:function(e){var t=parseInt(e,10);return[Math.floor(t/3600),Math.floor(t/60)%60,t%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}}]),e}();t.default=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a="http://api.ipstack.com/check?access_key=d6a0f4dddcef3105d3079c42de4cca7e",s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getIP",value:async function(){var e=await fetch(a);return(await e.json()).ip}},{key:"getUserID",value:async function(){var e=await fetch(a);return(await e.json()).ip.split(".").join("")}}]),e}());t.default=s},function(e,t){}]);